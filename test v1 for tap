local Tab = Window:MakeTab({"الـتنقل", "rbxassetid://115667778166194"})

local Section = Tab:AddSection({"تنـقل الى لاعـبين"})

local plrs = game.Players
local playerNames = {}
local selectedPlayerName = nil
local Dropdown = nil
local function updatePlayerList()
    playerNames = {}
    for _, player in ipairs(plrs:GetPlayers()) do
        table.insert(playerNames, player.Name)
    end
    if not table.find(playerNames, selectedPlayerName) then
        selectedPlayerName = playerNames[1] or nil
    end
    if Dropdown then
        Dropdown:SetOptions(playerNames)
    end
end
updatePlayerList()
Dropdown = Tab:AddDropdown({
    Name = "حـدد لاعـب",
    Description = "",
    Options = playerNames,
    Default = playerNames[1] or "No Players",
    Flag = "",
    Callback = function(selected)
        selectedPlayerName = selected
        local Sound = Instance.new("Sound", game:GetService("SoundService"))
        Sound.SoundId = "rbxassetid://17208372272"
        Sound:Play()
        game.StarterGui:SetCore("SendNotification", {
            Title = "اشـعار",
            Text = "تـم اختـيار : " .. selectedPlayerName,
            Duration = 3.0,
            Icon = "rbxassetid://104633354542892"
        })
    end
})

Tab:AddButton({
    Name = "اذهـب الى الاعـب",
    Callback = function()
        if not selectedPlayerName then
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://17208372272"
            Sound:Play()
            game.StarterGui:SetCore("SendNotification", {
                Title = "اشـعار",
                Text = "يجـب اخـتيار لاعـب اولاً",
                Duration = 3.0,
                Icon = "rbxassetid://104633354542892"
            })
            return
        end

        local targetPlayer = plrs:FindFirstChild(selectedPlayerName)
        local localPlayer = plrs.LocalPlayer

        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local targetPos = targetPlayer.Character.HumanoidRootPart.Position

            if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos)
            else
                local Sound = Instance.new("Sound", game:GetService("SoundService"))
                Sound.SoundId = "rbxassetid://17208372272"
                Sound:Play()
                game.StarterGui:SetCore("SendNotification", {
                    Title = "اشـعار",
                    Text = "حـاول مره اخـرى",
                    Duration = 3.0,
                    Icon = "rbxassetid://104633354542892"
                })
            end
        else
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://17208372272"
            Sound:Play()
            game.StarterGui:SetCore("SendNotification", {
                Title = "اشـعار",
                Text = "حـدد لاعـب اول",
                Duration = 3.0,
                Icon = "rbxassetid://104633354542892"
            })
        end
    end
})
plrs.PlayerAdded:Connect(updatePlayerList)
plrs.PlayerRemoving:Connect(updatePlayerList)

local Section = Tab:AddSection({"تـنقل الى امـاكن"})

local TeleportLocations = {
    { Name = "الـنافوره بـالبـدايه", CFrame = CFrame.new(-26, 19, 14) },
    { Name = "فوق القـوس الابـيـض", CFrame = CFrame.new(623, 134, -59) },
    { Name = "السفينــه البيضــه", CFrame = CFrame.new(-111, 7, 870) },
    { Name = "الكنيـسـه", CFrame = CFrame.new(-57, 39, -182) },
    { Name = "فـوق الجـبل", CFrame = CFrame.new(-663, 251, 757) },
    { Name = "تحـت الارض {1}", CFrame = CFrame.new(505, -76, 143) },
    { Name = "تحـت الارض {2}", CFrame = CFrame.new(-306, 4, -606) },
    { Name = "تحـت الـجبل ( مـكان سـري )", CFrame = CFrame.new(672, 4, -296) },
    { Name = "لوحـه {1}", CFrame = CFrame.new(-243, 89, -550) },
    { Name = "لوحـه {2}", CFrame = CFrame.new(-630, 26, 365) },
    { Name = "مـكـان الاسـلحه", CFrame = CFrame.new(-119, -27, 235) },
    { Name = "بـيت الرجـل العجــوز", CFrame = CFrame.new(986, 4, 63) }
}

local DropdownNames = {}
local TeleportMap = {}
for _, location in ipairs(TeleportLocations) do
    table.insert(DropdownNames, location.Name)
    TeleportMap[location.Name] = location.CFrame
end

local selectedName = nil

local function playTeleportEffect()
    local blur = Instance.new("BlurEffect")
    blur.Size = 0
    blur.Parent = game.Lighting

    for i = 1, 10 do
        blur.Size = i * 2
        wait(0.01)
    end

    wait(0.1)

    for i = 10, 1, -1 do
        blur.Size = i * 2
        wait(0.01)
    end

    blur:Destroy()
end

Tab:AddDropdown({
    Name = "حـدد مـكان",
    Options = DropdownNames,
    Callback = function(name)
        selectedName = name
        local Sound = Instance.new("Sound", game:GetService("SoundService"))
        Sound.SoundId = "rbxassetid://17208372272"
        Sound:Play()
        game.StarterGui:SetCore("SendNotification", {
            Title = "اشـعار",
            Text = "تـم اخـتيار " .. name,
            Duration = 3.0,
            Icon = "rbxassetid://104633354542892"
        })
    end
})

Tab:AddButton({
    Name = "اذهـب الى المـكان",
    Description = "",
    Callback = function()
        if not selectedName then
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://17208372272"
            Sound:Play()
            game.StarterGui:SetCore("SendNotification", {
                Title = "اشـعار",
                Text = "يـجب تحـديد مـكان اولاً",
                Duration = 3.0,
                Icon = "rbxassetid://104633354542892"
            })
            return
        end

        local cframeToTeleport = TeleportMap[selectedName]
        if not cframeToTeleport then
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://17208372272"
            Sound:Play()
            game.StarterGui:SetCore("SendNotification", {
                Title = "اشـعار",
                Text = "المـكان غـير موجـود",
                Duration = 3.0,
                Icon = "rbxassetid://104633354542892"
            })
            return
        end

        local player = game.Players.LocalPlayer
        if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
            player.CharacterAdded:Wait()
            repeat wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        end

        playTeleportEffect()
        player.Character.HumanoidRootPart.CFrame = cframeToTeleport
    end
})
